(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4532:function(e,t,r){Promise.resolve().then(r.bind(r,2688))},1640:function(e,t,r){"use strict";r.r(t),r.d(t,{ThemeContext:function(){return g},default:function(){return C}});var n=r(7437),s=r(1034),a=r.n(s),c=r(2265);r(3054);var l=r(1444),i=r(2351);let o=(0,i.oM)({name:"search",initialState:{value:""},reducers:{setValue:(e,t)=>{e.value=t.payload}}}),{setValue:d}=o.actions;var u=o.reducer,h=r(8101),m=r(8439),x=r(4815);let j=(0,i.xC)({reducer:{search:u,card:h.ZP,ui:m.ZP,[x.ao.reducerPath]:x.ao.reducer},middleware:e=>e().concat(x.ao.middleware)});var f=e=>{let{children:t}=e;return(0,n.jsx)(l.zt,{store:j,children:t})},p=r(108);r(9211);class v extends c.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){let{hasError:e}=this.state;if(e)return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Something went wrong."}),(0,n.jsx)("button",{className:"reload-btn",type:"button",onClick:()=>window.location.reload(),children:"Reload page"})]});let{children:t}=this.props;return t}constructor(e){super(e),this.state={hasError:!1}}}let g=(0,c.createContext)({theme:p.yU.DARK,setTheme:()=>{}});function C(e){let{children:t}=e,[r,s]=(0,c.useState)(p.yU.DARK);return(0,c.useEffect)(()=>{let e=document.getElementById("root");e&&(e.className=r===p.yU.DARK?"dark":"light")},[r]),(0,n.jsx)("html",{lang:"en",children:(0,n.jsx)(g.Provider,{value:{theme:r,setTheme:s},children:(0,n.jsxs)(v,{children:[(0,n.jsx)("head",{children:(0,n.jsx)("title",{children:"Star Wars"})}),(0,n.jsx)("body",{className:a().className,children:(0,n.jsx)(f,{children:(0,n.jsx)("main",{id:"root",children:t})})})]})})})}},2688:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A}});var n=r(7437),s=r(2265),a=r(1444),c=r(7138),l=r(8930);r(9501);var i=r(108),o=r(6648);r(4676);var d=r(1640),u=r(8101);r(8917);var h=e=>{let{isSelected:t=!1}=e;return(0,n.jsx)("span",{className:"heart-icon",children:(0,n.jsx)("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:t?"#20207f":"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M17.612 2.41452C17.1722 1.96607 16.65 1.61034 16.0752 1.36763C15.5005 1.12492 14.8844 1 14.2623 1C13.6401 1 13.0241 1.12492 12.4493 1.36763C11.8746 1.61034 11.3524 1.96607 10.9126 2.41452L9.99977 3.34476L9.08699 2.41452C8.19858 1.50912 6.99364 1.00047 5.73725 1.00047C4.48085 1.00047 3.27591 1.50912 2.38751 2.41452C1.4991 3.31992 1 4.5479 1 5.82833C1 7.10875 1.4991 8.33674 2.38751 9.24214L3.30029 10.1724L9.99977 17L16.6992 10.1724L17.612 9.24214C18.0521 8.79391 18.4011 8.26171 18.6393 7.67596C18.8774 7.0902 19 6.46237 19 5.82833C19 5.19428 18.8774 4.56645 18.6393 3.9807C18.4011 3.39494 18.0521 2.86275 17.612 2.41452V2.41452Z",stroke:t?"#20207f":"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},m=e=>{let{card:t}=e,{theme:r}=(0,s.useContext)(d.ThemeContext),c=(0,a.I0)(),{selectedCards:l}=(0,a.v9)(e=>e.card),i=(0,s.useMemo)(()=>{let e=t.url.split("/").filter(Boolean);return e[e.length-1]},[t]),m=e=>{c((0,u.JV)(e))},x=e=>{c((0,u.q2)(e))},j=l.some(e=>e.name===t.name);return(0,n.jsxs)("div",{"data-testid":"card-item",className:"card__item card__item_".concat(r," "),onClick:()=>m(i),children:[(0,n.jsx)("span",{className:"card__item-select-block",onClick:e=>{e.preventDefault(),e.stopPropagation(),x(t)},children:(0,n.jsx)(h,{isSelected:j})}),(0,n.jsx)("h2",{className:"card__title",children:t.name}),(0,n.jsxs)("div",{className:"card__content",children:[(0,n.jsxs)("p",{className:"card__description",children:["Hi! My name is ",t.name,". I was born in ",t.birth_year," year. My gender is"," ",t.gender]}),(0,n.jsx)(o.default,{className:"card__item-img",src:"https://starwars-visualguide.com/assets/img/characters/".concat(i,".jpg"),alt:t.name,width:200,height:300})]})]})},x=r(4815);let j={colors:{dark:i.yU.DARK,light:i.yU.LIGHT}},f=(0,s.createContext)(j),p=()=>(0,s.useContext)(f);var v=()=>{let{currentPage:e}=(0,a.v9)(e=>e.ui),t=p(),r=(0,a.I0)(),o="";o=localStorage.getItem(i.bK)||"";let{data:d,isLoading:h,error:j}=(0,x.PA)({query:o,currentPage:e}),f=(null==d?void 0:d.results)||[];return((0,s.useEffect)(()=>{f.length>0&&r((0,u.eJ)(f))},[f,e,r]),h)?(0,n.jsx)(l.Z,{color:"#3498db",size:50}):j?(0,n.jsx)("div",{children:"Error loading cards"}):f.length&&!h?(0,n.jsx)("div",{className:"result",children:f.map(t=>(0,n.jsx)(c.default,{className:"card-link",href:"/?frontpage=".concat(e,"&details=").concat(t.name),children:(0,n.jsx)(m,{card:t})},t.name))}):(0,n.jsx)("h3",{className:"title_".concat(t),children:"Nothing was founded"})},g=r(9810),C=r.n(g),y=r(6463);r(2607);let b=e=>{let[t,r]=(0,s.useState)("");return(0,s.useEffect)(()=>{{let t=localStorage.getItem(e);t&&r(t)}},[e]),(0,s.useEffect)(()=>{localStorage.setItem(e,t)},[e,t]),[t,r]};var N=r(8439),w=()=>{let{theme:e}=(0,s.useContext)(d.ThemeContext),t=(0,y.useRouter)(),r=(0,a.I0)(),{currentPage:c}=(0,a.v9)(e=>e.ui),[l,o]=b(i.bK),[h,m]=(0,s.useState)(l),{data:j,error:f}=(0,x.PA)({query:l,currentPage:c});(0,s.useEffect)(()=>{j&&r((0,u.eJ)(j.results))},[j,r]);let p=()=>{let e=null==h?void 0:h.trim();o(e),r((0,N.D4)(1)),t.push("?search=".concat(e,"&page=").concat(c))};if(f)throw Error("test error");return(0,n.jsxs)("div",{className:"search",children:[(0,n.jsx)("input",{type:"text",value:h||"",onChange:e=>{let{value:t}=e.target;m(t)},placeholder:"Search...",onKeyDown:e=>{"Enter"===e.key&&p()},className:"search-input "+"theme-".concat(e)}),(0,n.jsx)("button",{type:"button",onClick:p,className:"theme-".concat(e," search-btn"),children:"Search"})]})};r(9898);var _=()=>{let{setTheme:e}=(0,s.useContext)(d.ThemeContext),[t,r]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"theme-switch-container",children:[(0,n.jsx)("input",{type:"checkbox",className:"theme-switch-checkbox",id:"theme-switch",checked:t,onChange:()=>{let n=t?i.yU.DARK:i.yU.LIGHT;r(!t),e(n)}}),(0,n.jsxs)("label",{className:"theme-switch-label",htmlFor:"theme-switch",children:[(0,n.jsxs)("div",{className:"theme-icons-block",children:[(0,n.jsx)("span",{className:"theme-switch-icon",children:"\uD83C\uDF19"}),(0,n.jsx)("span",{className:"theme-switch-icon",children:"☀️"})]}),(0,n.jsx)("div",{className:"theme-switch-ball"})]})]})};r(4389);var k=()=>{let{theme:e}=(0,s.useContext)(d.ThemeContext),t=(0,a.I0)();return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"".concat(C().className," header__title header__title_").concat(e),children:"Star Wars World"}),(0,n.jsxs)("div",{className:"search-field",children:[(0,n.jsx)(w,{}),(0,n.jsx)("button",{type:"button",onClick:()=>{throw t((0,N.nB)(!0)),Error()},className:"theme-".concat(e," error-btn"),children:"Throw Error"}),(0,n.jsx)(_,{})]})]})};r(9977);var S=()=>{let e=(0,y.useRouter)(),{theme:t}=(0,s.useContext)(d.ThemeContext),{currentPage:r}=(0,a.v9)(e=>e.ui),c=(0,a.I0)(),l="";l=localStorage.getItem(i.bK)||"";let{data:o,isLoading:u}=(0,x.PA)({query:l,currentPage:r}),h=o?Math.ceil(o.count/i.PS):0,m=t=>{c((0,N.D4)(t)),e.push("?page=".concat(t))};return(0,n.jsxs)("div",{className:"pagination",children:[(0,n.jsx)("button",{type:"button",className:"nav-button theme-".concat(t),onClick:()=>m(1),disabled:1===r||u,children:"First"}),(0,n.jsx)("button",{type:"button",className:"nav-button theme-".concat(t),onClick:()=>m(r-1),disabled:1===r||u,children:"Prev"}),(()=>{let e=[];for(let s=1;s<=h;s++)e.push((0,n.jsx)("button",{type:"button",className:"page-button theme-".concat(t," ").concat(s===r?"active":""),onClick:()=>m(s),children:s},s));return e})(),(0,n.jsx)("button",{type:"button",className:"nav-button theme-".concat(t),onClick:()=>m(r+1),disabled:r===h||u,children:"Next"}),(0,n.jsx)("button",{type:"button",className:"nav-button theme-".concat(t),onClick:()=>m(h),disabled:r===h||u,children:"Last"})]})},I=r(7170);r(4652);var E=e=>{let{text:t,onClick:r}=e,{theme:a}=(0,s.useContext)(d.ThemeContext);return(0,n.jsx)("button",{type:"button",onClick:r,className:"flayoutBtn theme-".concat(a),children:t})};r(2460);var P=()=>{let{theme:e}=(0,s.useContext)(d.ThemeContext),{selectedCards:t}=(0,a.v9)(e=>e.card),r=(0,a.I0)(),[c,l]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{t.length>0?l(!0):l(!1)},[t]),0===t.length)return null;let i=e=>{let t=e.split("/");return t[t.length-3]};return(0,n.jsx)("div",{className:"flayout",children:(0,n.jsxs)("div",{className:"flayout-wrapper  theme-".concat(e," ").concat(c?"show":""),children:[(0,n.jsx)("h2",{children:1===t.length?"1 hero is selected":"".concat(t.length," heroes are selected")}),(0,n.jsxs)("div",{className:"flayout__btns",children:[(0,n.jsx)(E,{text:"Unselect All",onClick:()=>{r((0,u.q2)([]))}}),(0,n.jsx)(E,{text:"Download",onClick:()=>{let e=t.map(e=>{let{name:t,url:r,...n}=e;return"".concat(t,", ").concat(r,", ").concat(JSON.stringify(n))}).join("\n"),r=t.length>0?i(t[0].url):"items",n=new Blob([e],{type:"text/csv;charset=utf-8;"}),s="".concat(t.length,"_").concat(r,".csv");(0,I.saveAs)(n,s)}})]})]})})};r(5419);var D=()=>{let e=(0,a.I0)(),t=(0,y.useRouter)(),{cardId:r}=(0,a.v9)(e=>e.card),{currentPage:s}=(0,a.v9)(e=>e.ui),{data:c,isLoading:i,error:d}=(0,x.p8)(r);if(i)return(0,n.jsx)(l.Z,{color:"#3498db",size:50});if(d)return(0,n.jsx)("div",{className:"detail-card-info",children:"Something went wrong"});if(!c)return(0,n.jsx)("div",{className:"detail-card-info",children:"Detail info not found."});let h=c.url.split("/")[5];return(0,n.jsxs)("div",{className:"detail-card-info",children:[(0,n.jsx)("div",{className:"detail-card-info-close",children:(0,n.jsx)("button",{type:"button",onClick:()=>{e((0,u.JV)(null)),t.push("?page=".concat(s))},"aria-label":"Close",children:"X"})}),(0,n.jsxs)("div",{className:"detail-header",children:[(0,n.jsx)(o.default,{src:"https://starwars-visualguide.com/assets/img/characters/".concat(h,".jpg"),alt:c.name,width:500,height:500}),(0,n.jsx)("h2",{className:"detail-info-name",children:c.name})]}),(0,n.jsxs)("div",{className:"detail-content",children:[(0,n.jsx)("h3",{children:"BioCard:"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Height:"})," ",c.height]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Mass:"})," ",c.mass]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Hair color:"})," ",c.hair_color]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Skin color:"})," ",c.skin_color]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Eye color:"})," ",c.eye_color]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Birth year:"})," ",c.birth_year]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Created:"})," ",c.created]})]})]})},A=()=>{let e=(0,s.useRef)(null),t=(0,a.I0)(),{cardId:r,selectedCards:c}=(0,a.v9)(e=>e.card);return(0,n.jsxs)("div",{className:"app",children:[(0,n.jsx)(k,{}),(0,n.jsxs)("div",{className:"content",children:[(0,n.jsxs)("div",{className:"results-field",ref:e,onClick:r=>{r.target===e.current&&t((0,u.JV)(null))},children:[(0,n.jsx)(v,{}),(0,n.jsx)(S,{}),c&&(0,n.jsx)(P,{})]}),r&&(0,n.jsx)(D,{})]})]})}},4815:function(e,t,r){"use strict";r.d(t,{PA:function(){return l},ao:function(){return c},p8:function(){return i}});var n=r(8507),s=r(6074),a=r(108);let c=(0,n.LC)({reducerPath:"cardAPI",baseQuery:(0,s.ni)({baseUrl:a._n}),endpoints:e=>({getAllCards:e.query({query:e=>{let{query:t,currentPage:r}=e;return{url:"/people/",params:{search:t,page:r}}}}),getCardById:e.query({query:e=>({url:"/people/".concat(e,"/")})})})}),{useGetAllCardsQuery:l,useGetCardByIdQuery:i}=c},8101:function(e,t,r){"use strict";r.d(t,{JV:function(){return s},eJ:function(){return c},q2:function(){return a}});let n=(0,r(2351).oM)({name:"card",initialState:{cardId:null,selectedCards:[],cards:[]},reducers:{setCardId:(e,t)=>{e.cardId=t.payload},setSelectedCards:(e,t)=>{if(Array.isArray(t.payload))e.selectedCards=t.payload;else{let r=t.payload,n=e.selectedCards.findIndex(e=>{let{name:t}=e;return r.name===t});-1!==n?e.selectedCards.splice(n,1):e.selectedCards.push(t.payload)}},setCards:(e,t)=>{e.cards=t.payload}}}),{setCardId:s,setSelectedCards:a,setCards:c}=n.actions;t.ZP=n.reducer},8439:function(e,t,r){"use strict";r.d(t,{D4:function(){return s},nB:function(){return a}});let n=(0,r(2351).oM)({name:"ui",initialState:{hasError:!1,currentPage:1},reducers:{setHasError:(e,t)=>{e.hasError=t.payload},setCurrentPage:(e,t)=>{e.currentPage=t.payload}}}),{setCurrentPage:s,setHasError:a}=n.actions;t.ZP=n.reducer},108:function(e,t,r){"use strict";r.d(t,{PS:function(){return c},_n:function(){return s},bK:function(){return n},yU:function(){return a}});let n="searchQuery",s="https://swapi.dev/api/",a={LIGHT:"light",DARK:"dark"},c=10},3054:function(){},4676:function(){},5419:function(){},9211:function(){},2460:function(){},4389:function(){},8917:function(){},9977:function(){},9501:function(){},2607:function(){},4652:function(){},9898:function(){}},function(e){e.O(0,[375,21,754,808,231,290,971,23,744],function(){return e(e.s=4532)}),_N_E=e.O()}]);