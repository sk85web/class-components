(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(9458)}])},9458:function(e,t,a){"use strict";a.r(t),a.d(t,{ThemeContext:function(){return Z},default:function(){return z}});var n=a(5893),c=a(7294),r=a(5007),s=a(1664),i=a.n(s),l=a(704),o=a.n(l),d=a(1525),_=a(5675),h=a.n(_),u=a(1054),m=a.n(u),x=a(9899),g=a(8092),f=a.n(g),j=e=>{let{isSelected:t=!1}=e,{theme:a}=(0,c.useContext)(Z);return(0,n.jsx)("span",{className:f()["heart-icon"],children:(0,n.jsx)("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:t?"#20207f":"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M17.612 2.41452C17.1722 1.96607 16.65 1.61034 16.0752 1.36763C15.5005 1.12492 14.8844 1 14.2623 1C13.6401 1 13.0241 1.12492 12.4493 1.36763C11.8746 1.61034 11.3524 1.96607 10.9126 2.41452L9.99977 3.34476L9.08699 2.41452C8.19858 1.50912 6.99364 1.00047 5.73725 1.00047C4.48085 1.00047 3.27591 1.50912 2.38751 2.41452C1.4991 3.31992 1 4.5479 1 5.82833C1 7.10875 1.4991 8.33674 2.38751 9.24214L3.30029 10.1724L9.99977 17L16.6992 10.1724L17.612 9.24214C18.0521 8.79391 18.4011 8.26171 18.6393 7.67596C18.8774 7.0902 19 6.46237 19 5.82833C19 5.19428 18.8774 4.56645 18.6393 3.9807C18.4011 3.39494 18.0521 2.86275 17.612 2.41452V2.41452Z",stroke:t?"#20207f":a===d.yU.DARK?"#fff":"#20207f",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},p=e=>{let{card:t}=e,{theme:a}=(0,c.useContext)(Z),s=(0,r.I0)(),{selectedCards:i}=(0,r.v9)(e=>e.card),l=(0,c.useMemo)(()=>{let e=t.url.split("/").filter(Boolean);return e[e.length-1]},[t]),o=e=>{s((0,x.JV)(e))},d=e=>{s((0,x.q2)(e))},_=i.some(e=>e.name===t.name);return(0,n.jsxs)("div",{"data-testid":"card-item",className:"".concat(m().card__item," ").concat(m()["card__item_".concat(a)]),onClick:()=>o(l),children:[(0,n.jsx)("span",{className:m()["card__item-select-block"],onClick:e=>{e.preventDefault(),e.stopPropagation(),d(t)},children:(0,n.jsx)(j,{isSelected:_})}),(0,n.jsx)("h2",{className:m()["card__item-select-block"],children:t.name}),(0,n.jsxs)("div",{className:m().card__content,children:[(0,n.jsxs)("p",{className:m().card__descripiton,children:["Hi! My name is ",t.name,". I was born in ",t.birth_year," year. My gender is"," ",t.gender]}),(0,n.jsx)(h(),{className:m()["card__item-img"],src:"https://starwars-visualguide.com/assets/img/characters/".concat(l,".jpg"),alt:t.name,width:200,height:300})]})]})},b=a(6389),v=()=>{let{currentPage:e}=(0,r.v9)(e=>e.ui),{theme:t}=(0,c.useContext)(Z),a=(0,r.I0)(),s="";s=localStorage.getItem(d.bK)||"";let{data:l,isLoading:_,error:h}=(0,b.PA)({query:s,currentPage:e}),u=(null==l?void 0:l.results)||[];return((0,c.useEffect)(()=>{u.length>0&&a((0,x.eJ)(u))},[u,e,a]),_)?(0,n.jsx)("div",{children:"Loading..."}):h?(0,n.jsx)("div",{children:"Error loading cards"}):u.length&&!_?(0,n.jsx)("div",{className:o().result,children:u.map(t=>(0,n.jsx)(i(),{className:o()["card-link"],href:"/?frontpage=".concat(e,"&details=").concat(t.name),children:(0,n.jsx)(p,{card:t})},t.name))}):(0,n.jsx)("h3",{className:o()["title_".concat(t)],children:"Nothing was founded"})},C=a(8904),k=a.n(C),N=a(9332),y=a(1263),w=a.n(y);let I=e=>{let[t,a]=(0,c.useState)("");return(0,c.useEffect)(()=>{{let t=localStorage.getItem(e);t&&a(t)}},[e]),(0,c.useEffect)(()=>{localStorage.setItem(e,t)},[e,t]),[t,a]};var S=a(4784),D=()=>{let{theme:e}=(0,c.useContext)(Z),t=(0,N.useRouter)(),a=(0,r.I0)(),{currentPage:s}=(0,r.v9)(e=>e.ui),[i,l]=I(d.bK),[o,_]=(0,c.useState)(i),{data:h,error:u}=(0,b.PA)({query:i,currentPage:s});(0,c.useEffect)(()=>{h&&a((0,x.eJ)(h.results))},[h,a]);let m=()=>{let e=null==o?void 0:o.trim();l(e),a((0,S.D4)(1)),t.push("?search=".concat(e,"&page=").concat(s))};if(u)throw Error("test error");return(0,n.jsxs)("div",{className:w().search,children:[(0,n.jsx)("input",{type:"text",value:o||"",onChange:e=>{let{value:t}=e.target;_(t)},placeholder:"Search...",onKeyDown:e=>{"Enter"===e.key&&m()},className:"".concat(w()["search-input"]," theme-").concat(e)}),(0,n.jsx)("button",{type:"button",onClick:m,className:"theme-".concat(e," ").concat(w()["search-btn"]),children:"Search"})]})},L=a(1734),P=a.n(L),E=()=>{let{setTheme:e}=(0,c.useContext)(Z),[t,a]=(0,c.useState)(!1);return(0,n.jsxs)("div",{className:P()["theme-switch-container"],children:[(0,n.jsx)("input",{type:"checkbox",className:P()["theme-switch-checkbox"],id:"theme-switch",checked:t,onChange:()=>{let n=t?d.yU.DARK:d.yU.LIGHT;a(!t),e(n)}}),(0,n.jsxs)("label",{className:P()["theme-switch-label"],htmlFor:"theme-switch",children:[(0,n.jsxs)("div",{className:P()["theme-icons-block"],children:[(0,n.jsx)("span",{className:P()["theme-switch-icon"],children:"\uD83C\uDF19"}),(0,n.jsx)("span",{className:P()["theme-switch-icon"],children:"☀️"})]}),(0,n.jsx)("div",{className:P()["theme-switch-ball"]})]})]})},T=a(6940),H=a.n(T),M=()=>{let{theme:e}=(0,c.useContext)(Z),t=(0,r.I0)();return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"".concat(k().className," ").concat(H().header__title," ").concat(H()["header__title_".concat(e)]),children:"Star Wars World"}),(0,n.jsxs)("div",{className:H()["search-field"],children:[(0,n.jsx)(D,{}),(0,n.jsx)("button",{type:"button",onClick:()=>{throw t((0,S.nB)(!0)),Error("Simulated error")},className:"theme-".concat(e," ").concat(H()["error-btn"]),children:"Throw Error"}),(0,n.jsx)(E,{})]})]})},B=a(1047),R=a.n(B),K=()=>{let e=(0,N.useRouter)(),{theme:t}=(0,c.useContext)(Z),{currentPage:a}=(0,r.v9)(e=>e.ui),s=(0,r.I0)(),i="";i=localStorage.getItem(d.bK)||"";let{data:l,isLoading:o}=(0,b.PA)({query:i,currentPage:a}),_=l?Math.ceil(l.count/d.PS):0,h=t=>{s((0,S.D4)(t)),e.push("?page=".concat(t))};return(0,n.jsxs)("div",{className:R().pagination,children:[(0,n.jsx)("button",{type:"button",className:"".concat(R()["nav-button"]," theme-").concat(t),onClick:()=>h(1),disabled:1===a||o,children:"First"}),(0,n.jsx)("button",{type:"button",className:"".concat(R()["nav-button"]," theme-").concat(t),onClick:()=>h(a-1),disabled:1===a||o,children:"Prev"}),(()=>{let e=[];for(let c=1;c<=_;c++)e.push((0,n.jsx)("button",{type:"button",className:"".concat(R()["page-button"]," theme-").concat(t," ").concat(c===a?R().active:""),onClick:()=>h(c),children:c},c));return e})(),(0,n.jsx)("button",{type:"button",className:"".concat(R()["nav-button"]," theme-").concat(t),onClick:()=>h(a+1),disabled:a===_||o,children:"Next"}),(0,n.jsx)("button",{type:"button",className:"".concat(R()["nav-button"]," theme-").concat(t),onClick:()=>h(_),disabled:a===_||o,children:"Last"})]})},A=a(3162),U=a(4398),q=a.n(U),F=e=>{let{text:t,onClick:a}=e,{theme:r}=(0,c.useContext)(Z);return(0,n.jsx)("button",{type:"button",onClick:a,className:"".concat(q().flayoutBtn," theme-").concat(r),children:t})},V=a(5463),W=a.n(V),J=()=>{let{selectedCards:e}=(0,r.v9)(e=>e.card),t=(0,r.I0)(),[a,s]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{e.length>0?s(!0):s(!1)},[e]),0===e.length)return null;let i=e=>{let t=e.split("/");return t[t.length-3]};return(0,n.jsx)("div",{className:W().flayout,children:(0,n.jsxs)("div",{className:"".concat(W()["flayout-wrapper"],"  theme-dark ").concat(a?W().show:""),children:[(0,n.jsx)("h2",{children:1===e.length?"1 hero is selected":"".concat(e.length," heroes are selected")}),(0,n.jsxs)("div",{className:W().flayout__btns,children:[(0,n.jsx)(F,{text:"Unselect All",onClick:()=>{t((0,x.q2)([]))}}),(0,n.jsx)(F,{text:"Download",onClick:()=>{let t=e.map(e=>{let{name:t,url:a,...n}=e;return"".concat(t,", ").concat(a,", ").concat(JSON.stringify(n))}).join("\n"),a=e.length>0?i(e[0].url):"items",n=new Blob([t],{type:"text/csv;charset=utf-8;"}),c="".concat(e.length,"_").concat(a,".csv");(0,A.saveAs)(n,c)}})]})]})})},G=a(5617),Q=a.n(G),X=()=>{let e=(0,r.I0)(),t=(0,N.useRouter)(),{cardId:a}=(0,r.v9)(e=>e.card),{currentPage:c}=(0,r.v9)(e=>e.ui),{data:s,isLoading:i,error:l}=(0,b.p8)(a);if(i)return(0,n.jsx)("div",{className:"".concat(Q().loading," ").concat(Q()["loading_detail-info"]," loading-dark"),children:"Loading detail info..."});if(l)return(0,n.jsx)("div",{className:Q()["detail-card-info"],children:"Something went wrong"});if(!s)return(0,n.jsx)("div",{className:Q()["detail-card-info"],children:"Detail info not found."});let o=s.url.split("/")[5];return(0,n.jsxs)("div",{className:Q()["detail-card-info"],children:[(0,n.jsx)("div",{className:Q()["detail-card-info-close"],children:(0,n.jsx)("button",{type:"button",onClick:()=>{e((0,x.JV)(null)),t.push("?page=".concat(c))},"aria-label":"Close",children:"X"})}),(0,n.jsxs)("div",{className:Q()["detail-header"],children:[(0,n.jsx)(h(),{src:"https://starwars-visualguide.com/assets/img/characters/".concat(o,".jpg"),alt:s.name,width:500,height:500}),(0,n.jsx)("h2",{className:Q()["detail-info-name"],children:s.name})]}),(0,n.jsxs)("div",{className:Q()["detail-content"],children:[(0,n.jsx)("h3",{children:"BioCard:"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Height:"})," ",s.height]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Mass:"})," ",s.mass]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Hair color:"})," ",s.hair_color]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Skin color:"})," ",s.skin_color]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Eye color:"})," ",s.eye_color]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Birth year:"})," ",s.birth_year]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Created:"})," ",s.created]})]})]})};let Z=(0,c.createContext)({theme:d.yU.DARK,setTheme:()=>{}});var z=()=>{let[e,t]=(0,c.useState)(d.yU.DARK),a=(0,c.useRef)(null),s=(0,r.I0)(),{cardId:i,selectedCards:l}=(0,r.v9)(e=>e.card);return(0,n.jsx)(Z.Provider,{value:{theme:e,setTheme:t},children:(0,n.jsxs)("div",{className:"app ".concat(e===d.yU.LIGHT?"light":"dark"),children:[(0,n.jsx)(M,{}),(0,n.jsxs)("div",{className:"content",children:[(0,n.jsxs)("div",{className:"results-field",ref:a,onClick:e=>{e.target===a.current&&s((0,x.JV)(null))},children:[(0,n.jsx)(v,{}),(0,n.jsx)(K,{}),l&&(0,n.jsx)(J,{})]}),i&&(0,n.jsx)(X,{})]})]})})}},1054:function(e){e.exports={card__item:"Card_card__item__QxI0W",card__item_dark:"Card_card__item_dark__b4_Il",card__item_light:"Card_card__item_light__taLQe",card__description:"Card_card__description__MMsq_",card__item_selected:"Card_card__item_selected__M2pTb",card__title:"Card_card__title__WHXam",card__content:"Card_card__content__G35Tr","card__item-img":"Card_card__item-img__cVA6R",title_dark:"Card_title_dark__NeGLl",title_light:"Card_title_light__4_S39","card__item-select-block":"Card_card__item-select-block__EHIqi"}},5617:function(e){e.exports={"loading_detail-info":"DetailCardInfo_loading_detail-info__djuYE",loading_dark:"DetailCardInfo_loading_dark__ptP2i","detail-info-name":"DetailCardInfo_detail-info-name__ZkPz0","detail-content":"DetailCardInfo_detail-content__cbltM","detail-card-info":"DetailCardInfo_detail-card-info__zUIF0","detail-header":"DetailCardInfo_detail-header__USL_6","detail-card-info-close":"DetailCardInfo_detail-card-info-close__2DqjE"}},5463:function(e){e.exports={flayout:"FlayoutMenu_flayout__vVdT2","flayout-wrapper":"FlayoutMenu_flayout-wrapper__LewyA",show:"FlayoutMenu_show__jU0uI",flayout__btns:"FlayoutMenu_flayout__btns__KzrZX"}},6940:function(e){e.exports={header__title:"Header_header__title__1HkDI",burn:"Header_burn__EMP1R",header__title_dark:"Header_header__title_dark__Qe8vT","burn-dark":"Header_burn-dark__fAe2c",header__title_light:"Header_header__title_light__qlsPk","burn-light":"Header_burn-light__1Ztab","search-field":"Header_search-field__NLPIC","error-btn":"Header_error-btn__LisVI"}},8092:function(e){e.exports={"heart-icon":"HeartIcon_heart-icon__8vUir"}},1047:function(e){e.exports={pagination:"Pagination_pagination__c7olK","nav-button":"Pagination_nav-button__MP5Gk","page-button":"Pagination_page-button__baVum",active:"Pagination_active__xC1TQ","page-theme_dark":"Pagination_page-theme_dark__5Mavb","page-theme_light":"Pagination_page-theme_light__eamJd"}},704:function(e){e.exports={result:"Results_result__TLDrK","card-link":"Results_card-link__NRRg3"}},1263:function(e){e.exports={search:"Search_search__y4cRQ","search-field":"Search_search-field__ktnhm","search-input":"Search_search-input__ZvKIr","search-btn":"Search_search-btn__5gvxq"}},4398:function(e){e.exports={flayoutBtn:"FlayoutBtn_flayoutBtn__qBoca"}},1734:function(e){e.exports={"theme-switch-container":"ThemeBtn_theme-switch-container__r_L_G","theme-switch-checkbox":"ThemeBtn_theme-switch-checkbox__xCW1C","theme-switch-label":"ThemeBtn_theme-switch-label__WtYgN","theme-switch-ball":"ThemeBtn_theme-switch-ball__1zWlK","theme-icons-block":"ThemeBtn_theme-icons-block__ii3U1"}}},function(e){e.O(0,[664,604,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);